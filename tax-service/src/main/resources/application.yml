server:
  port: ${SERVER_PORT:8082}

spring:
  application:
    name: tax-service
  flyway:
    enabled: true
    locations: classpath:db/migration/tax

# Tax service database configuration.
# Override these values per-environment (e.g., via environment variables or
# externalized configuration) when running against a real Postgres instance.
tax:
  db:
    url: ${TAX_DB_URL:jdbc:postgresql://localhost:5432/us_payroll_tax}
    username: ${TAX_DB_USERNAME:tax_service}
    # Avoid committing credential-shaped defaults; supply via env/secret manager.
    password: ${TAX_DB_PASSWORD:}

  federalWithholding:
    # Method used for federal income tax withholding. Valid values: PERCENTAGE, WAGE_BRACKET.
    # Default is PERCENTAGE to match existing behavior.
    method: PERCENTAGE
    # When true, enables stricter Pub 15-T behavior toggles (placeholder for future use).
    pub15tStrictMode: false

management:
  endpoint:
    health:
      probes:
        enabled: true
  tracing:
    sampling:
      probability: ${TRACING_SAMPLING_PROBABILITY:0.1}
  otlp:
    tracing:
      endpoint: ${OTEL_EXPORTER_OTLP_ENDPOINT:http://localhost:4318/v1/traces}
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
